<!-- GitHub Copilot / AI agent instructions for contributors -->

# Quick agent guide — School Website Template

This repo is a Vite + React + TypeScript frontend that uses Supabase for data and storage. The admin UI and public site are in the same codebase; routes are wired in `src/App.tsx`.

Core facts
- Frontend framework: Vite + React + TypeScript
- Data: Supabase (client at `src/integrations/supabase/client.ts`) — do NOT edit generated client/types
- Server state: TanStack Query (`@tanstack/react-query`) with custom hooks in `src/hooks`
- Styling: Tailwind + shadcn-style UI primitives in `src/components/ui`

Key files & directories
- Routes & app shell: [src/App.tsx](src/App.tsx)
- Pages: `src/pages/` (add new pages here and register in `src/App.tsx`)
- Admin UI: `src/components/admin/` (organized by feature)
- UI primitives: `src/components/ui/` (use these wrappers; they wrap Radix primitives)
- Supabase client: `src/integrations/supabase/client.ts` (generated)
- Supabase types: `src/integrations/supabase/types.ts` (generated)
- Migrations: `supabase/migrations/`

Quick developer workflows
- Install: `npm install`
- Run dev: `npm run dev` (if you need local Supabase: `npm run supabase:start` then `npm run dev`)
- Build: `npm run build` (preview with `npm run preview`)
- Supabase local control: `npm run supabase:start|stop|reset|status` (requires Supabase CLI)

Patterns & conventions (project-specific)
- Import alias: use `@/` for `src/` imports (see `tsconfig.json`).
- Use the provided `supabase` client: `import { supabase } from '@/integrations/supabase/client'`.
- React-query: prefer `useQuery`/`useMutation` and existing custom hooks (see `src/hooks/useSchoolSettings.ts`).
- UI components: reuse `src/components/ui/*` wrappers (e.g., `Button`, `Input`, `Dialog`) instead of raw Radix. They keep consistent props, variants, and Tailwind classes.
- Admin pattern: pages under `src/pages/*` often import admin components from `src/components/admin/*` and use form components like `ImageUpload` and `RichTextEditor` (see `src/components/admin/news/NewsForm.tsx`).

Database & generated code
- When changing DB schema: add SQL in `supabase/migrations/`, run migration locally, then regenerate types — `src/integrations/supabase/types.ts` is checked in.
- Treat files under `src/integrations/supabase/` as generated. Look for `// This file is automatically generated`.

Examples
- Add page: create `src/pages/MyPage.tsx`, export default component, then register in `src/App.tsx`:
  - `import MyPage from './pages/MyPage'`
  - `<Route path="/my-page" element={<MyPage />} />`
- Use supabase: `const { data, error } = await supabase.from('news').select('*')`

Testing & linting
- No automated test suite is present. Focus on manual verification: visit pages, test admin flows, and verify DB rows via Supabase.
- Lint: `npm run lint`

If you're unsure
- Search components under `src/components/` to find examples (e.g., `NewsForm.tsx` for CRUD patterns, `useSchoolSettings.ts` for react-query usage).
- If a section of this guide is unclear or you'd like a walkthrough for creating an admin CRUD page, tell me which area and I'll expand with step-by-step, copyable snippets.

---
Last updated: automated agent merge — please review and request edits.
